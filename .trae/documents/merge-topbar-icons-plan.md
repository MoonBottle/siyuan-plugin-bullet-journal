# 顶栏图标合并优化方案

## 问题分析
当前插件在思源笔记顶栏注册了4个图标：
1. 日历视图 (iconCalendar)
2. 甘特图 (iconGraph)
3. 项目列表 (iconFolder)
4. 待办事项 Dock (iconList) - 在右侧底部

这占用了过多的顶栏空间，影响用户体验。

## 优化方案

### 方案一：合并为单个下拉菜单图标（推荐）
将日历、甘特图、项目三个Tab入口合并为一个下拉菜单图标，点击后显示选项列表。

**实现步骤：**
1. 移除原有的3个独立顶栏按钮注册
2. 注册一个新的顶栏按钮，使用 `iconBulletJournal` 或 `iconMenu` 作为主图标
3. 点击按钮时显示下拉菜单，包含：
   - 日历视图
   - 甘特图
   - 项目列表
4. 待办事项Dock保持独立（因为它是一个Dock，不是Tab）

**优点：**
- 大幅减少顶栏占用空间（从3个图标减少到1个）
- 保持所有功能完整
- 用户操作仍然便捷

### 方案二：使用右键菜单
保留一个主图标，右键点击显示视图切换选项。

**实现步骤：**
1. 注册单个顶栏按钮
2. 左键点击打开默认视图（可在设置中配置）
3. 右键点击显示上下文菜单，包含三个视图选项

**优点：**
- 更加简洁
- 左键快速访问常用视图

**缺点：**
- 右键操作不如左键直观

### 方案三：可配置显示
在设置中添加选项，让用户选择显示哪些顶栏图标。

**实现步骤：**
1. 在设置面板添加"顶栏图标显示"配置项
2. 用户可勾选要显示的图标
3. 根据配置动态注册顶栏按钮

**优点：**
- 灵活性最高
- 满足不同用户需求

**缺点：**
- 实现复杂度较高
- 需要额外的UI和存储逻辑

## 推荐实施方案

采用**方案一：合并为单个下拉菜单图标**

### 具体修改计划

#### 1. 修改 `registerTopBar()` 方法
- 移除3个独立的 `addTopBar` 调用
- 添加1个新的 `addTopBar` 调用，使用下拉菜单

#### 2. 创建下拉菜单UI
- 使用思源原生的 `Menu` 类创建下拉菜单
- 菜单项包含：日历视图、甘特图、项目列表
- 每个菜单项显示对应的图标和标题

#### 3. 保持向后兼容
- 默认视图设置仍然有效
- 所有现有功能保持不变

### 代码变更预估
- 修改文件：`src/index.ts`
- 修改范围：`registerTopBar()` 方法（约615-642行）
- 新增代码：约30-50行
- 删除代码：约25行

### 视觉效果
- 顶栏从 3个图标 + 1个Dock图标 → 1个主图标 + 1个Dock图标
- 节省约66%的顶栏空间
